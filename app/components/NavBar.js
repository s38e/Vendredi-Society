import React, { useEffect, useState } from "react";
import stylesPage from "@/app/page.module.css";
import styles from "./styles/NavBar.module.css";
import gsap from "gsap";

function NavBar() {
  const [isSectionVisible, setIsSectionVisible] = useState(true);

  useEffect(() => {
    const handleScroll = () => {
      const sectionElement = document.querySelector(`.${stylesPage.section_1}`);
      if (sectionElement) {
        const sectionTop = sectionElement.getBoundingClientRect().top;
        const sectionBottom = sectionElement.getBoundingClientRect().bottom;
        const windowHeight = window.innerHeight;

        // إذا كان المستخدم داخل حدود السكشن
        if (sectionTop <= windowHeight && sectionBottom >= 0) {
          setIsSectionVisible(true); // المستخدم داخل السكشن
        } else {
          setIsSectionVisible(false); // المستخدم خارج السكشن
        }
      }
    };

    window.addEventListener("scroll", handleScroll);

    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);

  return (
    <nav className={styles.NavBar}>
      <div
        className={`${styles.logo} ${
          isSectionVisible ? "" : styles.OutSection
        }`}
      >
        <svg
          width="167"
          height="19"
          viewBox="0 0 167 19"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M91.286 0.5625C84.2643 0.5625 84.2643 4.44594 77.2441 4.44594V14.4108C82.8448 14.4108 83.9775 11.9394 87.7727 10.9406V14.4108C94.7944 14.4108 94.7944 10.5274 101.815 10.5274V0.5625C96.2139 0.5625 95.0812 3.03392 91.286 4.03274V0.5625Z"
            fill="#F0FF3D"
            class="-flag"
          ></path>
          <path d="M10.5274 0.570196L6.69439 10.9234L2.86294 0.570196H0.287109L5.40884 14.4092H7.98782L13.1001 0.570196H10.5274Z"></path>
          <path d="M16.8622 12.5498C15.2978 12.5498 14.2549 11.523 14.0753 9.92151H21.5334C21.5539 9.72268 21.5743 9.42599 21.5743 9.09046C21.5743 6.71846 20.0509 4.28587 16.6621 4.28587C13.3537 4.28587 11.709 6.75729 11.709 9.38715C11.709 12.017 13.5538 14.5677 16.8622 14.5677C19.3483 14.5677 21.2325 13.2022 21.6137 11.0865H19.208C18.9465 12.0357 18.1257 12.5498 16.8622 12.5498ZM16.6621 6.10487C18.1257 6.10487 19.008 7.05398 19.1072 8.31998H14.1351C14.3951 6.81787 15.2773 6.10487 16.6621 6.10487Z"></path>
          <path d="M28.114 4.28587C26.6709 4.28587 25.5287 4.90722 24.9631 5.99459V4.45209H22.5007V14.417H24.9662V8.98017C24.9662 7.51689 25.9288 6.44972 27.3121 6.44972C28.5724 6.44972 29.4184 7.39728 29.4184 8.7627V14.417H31.884V8.24076C31.884 5.90759 30.3999 4.28587 28.114 4.28587Z"></path>
          <path d="M40.5157 5.65129C39.9344 4.84043 38.8726 4.28587 37.5492 4.28587C34.5559 4.28587 32.7772 6.38292 32.7772 9.42598C32.7772 12.469 34.5606 14.5677 37.5886 14.5677C38.8127 14.5677 39.9344 14.0333 40.5157 13.1696V14.4123H42.9624V0.570196H40.5157V5.65129ZM37.9494 12.4706C36.3062 12.4706 35.2223 11.2652 35.2223 9.42598C35.2223 7.58679 36.3062 6.38293 37.9494 6.38293C39.5925 6.38293 40.6733 7.58834 40.6733 9.42598C40.6733 11.2636 39.5878 12.4706 37.9431 12.4706H37.9494Z"></path>
          <path d="M46.8868 6.20429V4.44431H44.4197V14.4092H46.8868V9.70404C46.8868 7.80582 47.5075 6.48079 49.0719 6.48079H50.6552V4.44431H49.4736C48.1692 4.44431 47.3878 4.93829 46.8868 6.20429Z"></path>
          <path d="M56.081 12.5498C54.5166 12.5498 53.4737 11.523 53.2925 9.92151H60.7522C60.7726 9.72268 60.7915 9.42599 60.7915 9.09046C60.7915 6.71846 59.2681 4.28587 55.8794 4.28587C52.5709 4.28587 50.9278 6.75729 50.9278 9.38715C50.9278 12.017 52.7726 14.5677 56.081 14.5677C58.567 14.5677 60.4513 13.2022 60.8325 11.0865H58.4268C58.1606 12.0357 57.3429 12.5498 56.081 12.5498ZM55.8794 6.10487C57.3429 6.10487 58.2252 7.05398 58.326 8.31998H53.3524C53.6139 6.81787 54.4961 6.10487 55.8794 6.10487Z"></path>
          <path d="M69.4013 5.65129C68.8199 4.84043 67.7565 4.28587 66.4332 4.28587C63.4398 4.28587 61.6612 6.38292 61.6612 9.42598C61.6612 12.469 63.4462 14.5677 66.4741 14.5677C67.6967 14.5677 68.8199 14.0333 69.4013 13.1696V14.4123H71.8479V0.570196H69.4013V5.65129ZM66.8349 12.4706C65.1901 12.4706 64.1078 11.2652 64.1078 9.42598C64.1078 7.58679 65.1901 6.38293 66.8349 6.38293C68.4797 6.38293 69.562 7.58834 69.562 9.42598C69.562 11.2636 68.4797 12.4706 66.8349 12.4706Z"></path>
          <path d="M75.777 4.44431H73.3115V14.4092H75.777V4.44431Z"></path>
          <path d="M75.777 0.570196H73.3115V3.00123H75.777V0.570196Z"></path>
          <path d="M105.868 4.27033C105.868 3.30103 106.73 2.66881 108.113 2.66881C109.597 2.66881 110.559 3.47967 110.679 4.68819H113.2C113.08 2.09872 111.075 0.417969 108.106 0.417969C105.26 0.417969 103.275 1.9993 103.275 4.27344C103.275 9.572 110.813 7.51534 110.813 10.4869C110.813 11.7126 109.772 12.3059 108.267 12.3059C106.583 12.3059 105.54 11.318 105.4 9.77549H102.854C102.994 12.6819 105.078 14.5801 108.267 14.5801C111.355 14.5801 113.501 13.0174 113.501 10.4481C113.507 5.04081 105.868 7.33204 105.868 4.27033Z"></path>
          <path d="M119.686 4.29053C116.598 4.29053 114.392 6.46526 114.392 9.43065C114.392 12.396 116.598 14.5708 119.686 14.5708C122.774 14.5708 124.96 12.396 124.96 9.43065C124.96 6.46526 122.753 4.29053 119.686 4.29053ZM119.686 12.4753C118.002 12.4753 116.88 11.2326 116.88 9.43065C116.88 7.62874 118.002 6.38603 119.686 6.38603C121.37 6.38603 122.473 7.62874 122.473 9.43065C122.473 11.2326 121.351 12.4753 119.686 12.4753Z"></path>
          <path d="M131.103 12.4753C129.37 12.4753 128.436 11.1704 128.436 9.43065C128.436 7.69087 129.357 6.38603 131.062 6.38603C132.225 6.38603 133.208 7.09748 133.387 8.08542H135.834C135.613 5.79264 133.548 4.29053 131.002 4.29053C127.851 4.29053 125.869 6.58331 125.869 9.43065C125.869 12.278 127.854 14.5708 131.002 14.5708C133.608 14.5708 135.571 13.0081 135.886 10.8333H133.4C133.17 11.8213 132.269 12.4753 131.103 12.4753Z"></path>
          <path d="M145.29 12.5529C143.725 12.5529 142.682 11.5261 142.503 9.92462H149.961C149.981 9.72734 150.002 9.43065 150.002 9.09357C150.002 6.72157 148.477 4.29053 145.088 4.29053C141.78 4.29053 140.137 6.7604 140.137 9.39026C140.137 12.0201 141.981 14.5708 145.29 14.5708C147.776 14.5708 149.66 13.2053 150.041 11.0912H147.636C147.374 12.0403 146.553 12.5529 145.29 12.5529ZM145.088 6.10798C146.553 6.10798 147.434 7.05709 147.535 8.32309H142.563C142.823 6.82098 143.706 6.10798 145.088 6.10798Z"></path>
          <path d="M139.25 4.44742H136.784V14.4123H139.25V4.44742Z"></path>
          <path d="M139.25 0.573306H136.784V3.00434H139.25V0.573306Z"></path>
          <path d="M164.401 4.44587L161.92 11.2667L159.399 4.44587H154.884V1.77717H152.419V4.44587H150.434V6.48235H152.419V10.9296C152.419 13.1448 153.863 14.4092 156.069 14.4092H157.692V12.2158H156.349C155.426 12.2158 154.884 11.7017 154.884 10.6935V6.48235H157.803L160.761 14.4667L159.373 18.2833H161.718L166.76 4.44587H164.401Z"></path>
        </svg>
      </div>
      <div className={styles.btns}>
        <button className={styles.btn}>
          {/* <span>Menu</span> */}
          <span>Menu</span>
        </button>
        <button className={styles.btn}>
          {/* <span>Book a call</span> */}
          <span>Book a call</span>
        </button>
      </div>
    </nav>
  );
}

export default NavBar;
